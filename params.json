{
  "name": "Logstasher-cli",
  "tagline": "The power of command line to search/tail logstash logs",
  "body": "## logstasher-cli\r\n\r\nlogstasher-cli is a command line utility to query and tail logstash logs\r\n\r\n### Installation\r\n\r\nlogstasher-cli is written in Go language, and if you have [Go installed](https://golang.org/doc/install#install), you can just type in:\r\n\r\n`go get github.com/varlogs/logstasher-cli`\r\n\r\nThis will automatically download, compile and install the app.\r\nAfter that you should have `logstasher-cli` executable in your `$GOPATH/bin`.\t\r\n\r\n### Usage\r\n\r\n- [Overview](#overview)\r\n- [Setting up profile](#setting-up-profile)\r\n- [List all sources](#list-all-sources)\r\n- [Filtering by source](#filtering-by-source)\r\n- [Time Filters](#time-filters)\r\n  - [Duration Filter](#duration-filter)\r\n  - [After Filter](#after-filter)\r\n  - [Before Filter](#before-filter)\r\n- [Filter by Request Id](#filter-by-request-id)\r\n- [Keyword Search](#keyword-search)\r\n- [Keyword Watch](#keyword-watch)\r\n- [Tailing](#tailing)\r\n\r\n\r\n\r\n### Overview\r\n\r\nMake sure you have `logstasher-cli` installed by typing the following\r\n\r\n```powershell\r\n$ logstasher-cli  -h\r\n\r\nNAME:\r\n   logstasher-cli - The power of command line to search/tail logstash logs\r\n\r\nUSAGE:\r\n   logstasher-cli [global options] '<search keyword(s)>'\r\n   Options marked with (*) are saved between invocations of the command. Each time you specify an option marked with (*) previously stored settings are erased.\r\n....\r\n```\r\n\r\nYou can refer to the global options available in the help panel for easy and quick reference. A detailed write up of the various commands/options can be found below.\r\n\r\n### Setting up profile\r\n\r\nYou can setup different profiles that logstasher-cli can use to talk to multiple elasticsearch hosts. A typical setup would have separate profiles for each environment like staging, uat or production.\r\n\r\nYou can setup a profile by specifying the profile name the elasticsearch url:\r\n\r\n```bash\r\n$ logstasher-cli -p staging -url 'https://staging.logstasher.com:9200'\r\n```\r\n\r\nIgnore the port if the elasticsearch URL is behind some proxy and listening on port 80. You can setup multiple profiles using the above command specifying a profile name and host url for each environment.\r\n\r\nAny other commands in the future will require you to specify only the profile as `-p or —profile` option. You can setup one of the configures profiles as the default profile to make the profile implicit.\r\n\r\n```bash\r\n$ logstasher-cli -p staging --set-as-default\r\nstaging setup as default profile unless -p specified\r\n```\r\n\r\nYou can overwrite the url option at anytime by just calling the `-p` and `-url` options again. All of your profile settings are stored at `~/.logstasher` folder at your root level and you can look for yourself to see the configuration params stored by `logstasher-cli`\r\n\r\n**After defining the default profile, all future usages of the tool can skip specifying the profile `-p` and the host  `-url` options and only the search filters (if any) must be specified**\r\n\r\n### List all sources\r\n\r\nThis is more of a command than an option to list all the sources present in ElasticSearch. The output of this command is basically a unique aggregate on `source` field from all of the available indices\r\n\r\n```bash\r\n$ logstasher-cli --list-sources\r\nProfile: staging | Host: https://staging.logstasher.com:9200\r\nAuthService\r\nReporter\r\n....\r\n```\r\n\r\nNote that we have skipped specifying `-p and -url` options as the default profile is picked up automatically based on previous configuration steps.\r\n\r\n### Filtering by source\r\n\r\nNow that you know the list of available sources, you can restrict logs to one or more sources\r\n\r\n``` shell\r\n$ logstasher-cli -s AuthService\r\nProfile: staging | Host: https://staging.logstasher.com:9200\r\nQuerying logs after 2016-11-16T00:17:13.02191559\r\n....\r\n....\r\nFetch more logs or quit (m/q)?\r\n```\r\n\r\nWe will talk about a couple of items from the last command's output. Notice that the logs are retrieved after a specific timestamp. This is based on the [duration filter](#duration-filter) discussed later and is defaulted to `5m`. And the number of entries that are fetched are based on the `-n` filter and is defaulted to 100. In this case, after every 100 entries, the user will be prompted to press `m/q` to continue or to quit. `logstasher-cli` can fetch logs from the source infinitely as long as there are more entries available.\r\n\r\nAnd by the way, multiple sources can be specified in this filter as comma-separated values like `-s 'AuthService,ReportingService'`\r\n\r\n### Time Filters\r\n\r\n#### Duration Filter\r\n\r\nThe duration filter is an easy way to trail back to the past and search for logs from a starting point in the timeline. The possible values are `2m, 5m, 10m, 30m, 1h, 3h, 6h, 12h, 1d, 2d, 7d, 15d, 30d` and is defaulted to `5m`. \r\n\r\n```shell\r\n$ logstasher-cli -s AuthService -d 1d\r\n```\r\n\r\nwill fetch log entries of AuthService starting 24 hours in the past relative to the time at which the command is executed\r\n\r\n#### After Filter\r\n\r\nIn addition to duration filter, you can pin point a specific timestamp in the logging timeline and fetch all logs including and after that timestamp.\r\n\r\n``` shell\r\n$ logstasher-cli -a '2016-11-16T00:40:43.852'\r\n```\r\n\r\nwill fetch logs from all sources (since source filter is missing) starting from the specific timestamp given as value to  `-a`\r\n\r\n#### Before Filter\r\n\r\nSimilar to after filter, you can specify a before filter to fetch logs before a specific timestamp. \r\n\r\n**Both `after` and `before` filters accept timestamp in local timezone and will be translated to the host timezone automatically. So the timestamp displayed in the output, which is by default in the local timezone can be fed back as a filter**\r\n\r\n### Filter by Request Id\r\n\r\nYou can specify `id` filter to fetch all logs traced by a specific `x-request-id`\r\n\r\n```shell\r\n$ logstasher-cli -id 4cbff9a3\r\n```\r\n\r\n### Keyword Search\r\n\r\nThis might be the most used filter for `logstasher-cli`. In addition to all the above filters, you can specify one or more keywords to search in the text analysed `message` field\r\n\r\n``` shell\r\n$ logstasher-cli -d 12h \"Exception raised\"\r\n```\r\n\r\nThis command will search for all log entries that have the keywords `exception` and `raised` in the past 12 hours. The CLI will also highlight the search keywords in the log for easy reference\r\n\r\n### Keyword Watch\r\n\r\nSimilar to the previous command except that it does not apply any filter on the keywords, but just highlights them in the log results for easy eyeing.\r\n\r\n``` shell\r\n$ logstasher-cli -w 'Transaction committed'\r\n```\r\n\r\nwill highlight the words in the log trail for easy reference\r\n\r\n### Tailing\r\n\r\n`logstasher-cli` offers near realtime tailing of the logs based on the applied filters. Tail mode can be enabled by passing `-t` or `—tail` option. This mode will override all of the time filters including `-d, -a, -b` as by default, this will fetch the most recent 100 log entries from the host. When there are new entries appended to the host, they will be pulled and rendered on the terminal as and when they are available. This option will make you feel right at home with elasticsearch similar to using `tail -f` on a local file.\r\n\r\n``` shell\r\n$ logstasher-cli -tail -s AuthService -w \"403\"\r\n```\r\n\r\nWe believe you would mostly want to filter by specific sources and watch for keywords and continuously tail to assist you with debugging.\r\n\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}